{"ast":null,"code":"import _regeneratorRuntime from \"/Users/tuanquyen/Desktop/Karaoke frontend/project-3-final/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/tuanquyen/Desktop/Karaoke frontend/project-3-final/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/web.timers.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.search.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nexport default {\n  data: function data() {\n    return {\n      editDialog: false,\n      search: \"\",\n      roomTypesList: [],\n      loading: false,\n      page: 1,\n      pageCount: 0,\n      itemsPerPage: 10,\n      items: [],\n      headers: [{\n        text: \"ID\",\n        value: \"id\"\n      }, {\n        text: \"Name\",\n        value: \"name\"\n      }, {\n        text: \"Phone Number\",\n        value: \"phone_number\"\n      }, {\n        text: \"Email\",\n        value: \"email\"\n      }, {\n        text: \"Time\",\n        value: \"time\"\n      }, {\n        text: \"Room ID\",\n        value: \"room_id\"\n      }, {\n        text: \"Status\",\n        value: \"status\"\n      }, {\n        text: \"Room Type\",\n        value: \"room_type\"\n      }, {\n        text: \"Actions\",\n        value: \"actions\",\n        sortable: false\n      }],\n      updateForm: {\n        id: null,\n        name: \"\",\n        email: \"\",\n        phone_number: \"\"\n      }\n    };\n  },\n  watch: {\n    search: function search(newValue) {\n      this.loadItems();\n    }\n  },\n  methods: {\n    loadItems: function loadItems() {\n      var _this = this;\n      this.loading = true;\n      setTimeout(function () {\n        _this.loading = false;\n        _this.$axios.get(\"/orders?page=\".concat(_this.page, \"&limit=\").concat(_this.itemsPerPage, \"&search=\").concat(_this.search)).then(function (res) {\n          _this.items = res.data.items || [];\n          _this.pageCount = res.data.page_count;\n        })[\"catch\"](function (err) {\n          console.error(err);\n        });\n      }, 1000);\n    },\n    deleteItem: function deleteItem(item) {\n      var _this2 = this;\n      this.$axios[\"delete\"](\"/orders/\".concat(item.id)).then(function (res) {\n        _this2.loadItems();\n      })[\"catch\"](function (err) {\n        console.error(err);\n      });\n    },\n    showUpdateForm: function showUpdateForm(item) {\n      this.editDialog = true;\n      this.updateForm = {\n        id: item.id,\n        name: item.name,\n        phone_number: item.phone_number,\n        email: item.email,\n        time_start: item.time_start,\n        time_end: item.time_end,\n        room_id: item.room_id,\n        status: item.status,\n        room_type_id: item.room_type_id\n      };\n    },\n    updateStatus: function updateStatus(item) {\n      var _this3 = this;\n      this.$axios.put(\"/orders/\".concat(item.id), {\n        id: item.id,\n        name: item.name,\n        phone_number: item.phone_number,\n        email: item.email,\n        time_start: item.time_start,\n        time_end: item.time_end,\n        room_id: item.room_id,\n        status: item.status === \"unconfirmed\" ? \"confirmed\" : \"unconfirmed\",\n        room_type_id: item.room_type_id\n      }).then(function (res) {\n        _this3.loadItems();\n      });\n    },\n    updateItem: function updateItem() {\n      var _this4 = this;\n      this.$axios.put(\"/orders/\".concat(this.updateForm.id), {\n        id: this.updateForm.id,\n        name: this.updateForm.name,\n        phone_number: this.updateForm.phone_number,\n        email: this.updateForm.email,\n        time_start: this.updateForm.time_start,\n        time_end: this.updateForm.time_end,\n        room_id: this.updateForm.room_id,\n        status: this.updateForm.status,\n        room_type_id: this.updateForm.room_type_id\n      }).then(function (res) {\n        _this4.editDialog = false;\n        _this4.loadItems();\n      })[\"catch\"](function (err) {\n        console.error(err);\n      });\n    },\n    getRoomTypesList: function getRoomTypesList() {\n      var _this5 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _this5.$axios.get(\"/room_types/all\").then(function (res) {\n                _this5.roomTypesList = res.data;\n              })[\"catch\"](function (err) {\n                console.error(err);\n              });\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }))();\n    },\n    renderRoomType: function renderRoomType(id) {\n      var x = this.roomTypesList.find(function (i) {\n        return i.id === id;\n      });\n      return x.name;\n    }\n  },\n  created: function created() {\n    var _this6 = this;\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _this6.getRoomTypesList();\n          case 2:\n            _this6.loadItems();\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2);\n    }))();\n  }\n};","map":{"version":3,"names":["data","editDialog","search","roomTypesList","loading","page","pageCount","itemsPerPage","items","headers","text","value","sortable","updateForm","id","name","email","phone_number","watch","newValue","loadItems","methods","_this","setTimeout","$axios","get","concat","then","res","page_count","err","console","error","deleteItem","item","_this2","showUpdateForm","time_start","time_end","room_id","status","room_type_id","updateStatus","_this3","put","updateItem","_this4","getRoomTypesList","_this5","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","stop","renderRoomType","x","find","i","created","_this6","_callee2","_callee2$","_context2"],"sources":["src/components/Orders.vue"],"sourcesContent":["<template>\n  <v-container fluid>\n    <div>\n      <v-text-field\n        v-model=\"search\"\n        label=\"Search\"\n        append-icon=\"mdi-magnify\"\n      ></v-text-field>\n      <v-data-table\n        :headers=\"headers\"\n        :items=\"items\"\n        :page.sync=\"page\"\n        :items-per-page=\"itemsPerPage\"\n        hide-default-footer\n        class=\"elevation-1\"\n        :loading=\"loading\"\n      >\n        <template v-slot:[`item.time`]=\"{ item }\">\n          <span>\n            {{ item.time_start + \" - \" + item.time_end }}\n          </span>\n        </template>\n\n        <template v-slot:[`item.room_type`]=\"{ item }\">\n          <span>\n            {{ renderRoomType(item.room_type_id) }}\n          </span>\n        </template>\n\n        <template v-slot:[`item.phone_number`]=\"{ item }\">\n          <strong>\n            {{ item.phone_number }}\n          </strong>\n        </template>\n\n        <template v-slot:[`item.status`]=\"{ item }\">\n          <v-chip\n            :color=\"item.status === 'unconfirmed' ? 'red' : 'green'\"\n            text-color=\"white\"\n          >\n            {{ item.status === \"unconfirmed\" ? \"Unconfirmed\" : \"Confirmed\" }}\n          </v-chip>\n        </template>\n\n        <template v-slot:[`item.actions`]=\"{ item }\">\n          <v-icon\n            v-if=\"item.status === 'unconfirmed'\"\n            small\n            color=\"green\"\n            class=\"mr-2\"\n            @click=\"updateStatus(item)\"\n          >\n            mdi-check-circle\n          </v-icon>\n\n          <v-icon\n            v-if=\"item.status === 'confirmed'\"\n            small\n            color=\"red\"\n            class=\"mr-2\"\n            @click=\"updateStatus(item)\"\n          >\n            mdi-close-box\n          </v-icon>\n\n          <v-icon small class=\"mr-2\" @click=\"showUpdateForm(item)\">\n            mdi-pencil\n          </v-icon>\n\n          <v-icon small @click=\"deleteItem(item)\"> mdi-delete </v-icon>\n        </template>\n      </v-data-table>\n\n      <v-pagination\n        v-model=\"page\"\n        :length=\"pageCount\"\n        @next=\"loadItems\"\n        @previous=\"loadItems\"\n        @input=\"loadItems\"\n      ></v-pagination>\n    </div>\n\n    <v-dialog v-model=\"editDialog\" width=\"500\">\n      <v-card>\n        <v-card-title class=\"text-h5 grey lighten-2\">\n          Update Order\n        </v-card-title>\n\n        <v-card-actions>\n          <v-row>\n            <v-col cols=\"12\">\n              <v-text-field\n                v-model=\"updateForm.name\"\n                label=\"Name\"\n              ></v-text-field>\n            </v-col>\n\n            <v-col cols=\"12\">\n              <v-text-field\n                v-model=\"updateForm.phone_number\"\n                label=\"Phone Number\"\n              ></v-text-field>\n            </v-col>\n\n            <v-col cols=\"12\">\n              <v-text-field\n                v-model=\"updateForm.email\"\n                label=\"Email\"\n              ></v-text-field>\n            </v-col>\n          </v-row>\n        </v-card-actions>\n\n        <v-divider></v-divider>\n\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"#252525\" class=\"white--text\" @click=\"updateItem\">\n            Update\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </v-container>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      editDialog: false,\n      search: \"\",\n      roomTypesList: [],\n      loading: false,\n      page: 1,\n      pageCount: 0,\n      itemsPerPage: 10,\n      items: [],\n      headers: [\n        { text: \"ID\", value: \"id\" },\n        { text: \"Name\", value: \"name\" },\n        { text: \"Phone Number\", value: \"phone_number\" },\n        { text: \"Email\", value: \"email\" },\n        { text: \"Time\", value: \"time\" },\n        { text: \"Room ID\", value: \"room_id\" },\n        { text: \"Status\", value: \"status\" },\n        { text: \"Room Type\", value: \"room_type\" },\n        { text: \"Actions\", value: \"actions\", sortable: false },\n      ],\n\n      updateForm: {\n        id: null,\n        name: \"\",\n        email: \"\",\n        phone_number: \"\",\n      },\n    };\n  },\n\n  watch: {\n    search(newValue) {\n      this.loadItems();\n    },\n  },\n\n  methods: {\n    loadItems() {\n      this.loading = true;\n      setTimeout(() => {\n        this.loading = false;\n        this.$axios\n          .get(\n            `/orders?page=${this.page}&limit=${this.itemsPerPage}&search=${this.search}`\n          )\n          .then((res) => {\n            this.items = res.data.items || [];\n            this.pageCount = res.data.page_count;\n          })\n          .catch((err) => {\n            console.error(err);\n          });\n      }, 1000);\n    },\n\n    deleteItem(item) {\n      this.$axios\n        .delete(`/orders/${item.id}`)\n        .then((res) => {\n          this.loadItems();\n        })\n        .catch((err) => {\n          console.error(err);\n        });\n    },\n\n    showUpdateForm(item) {\n      this.editDialog = true;\n      this.updateForm = {\n        id: item.id,\n        name: item.name,\n        phone_number: item.phone_number,\n        email: item.email,\n        time_start: item.time_start,\n        time_end: item.time_end,\n        room_id: item.room_id,\n        status: item.status,\n        room_type_id: item.room_type_id,\n      };\n    },\n\n    updateStatus(item) {\n      this.$axios\n        .put(`/orders/${item.id}`, {\n          id: item.id,\n          name: item.name,\n          phone_number: item.phone_number,\n          email: item.email,\n          time_start: item.time_start,\n          time_end: item.time_end,\n          room_id: item.room_id,\n          status: item.status === \"unconfirmed\" ? \"confirmed\" : \"unconfirmed\",\n          room_type_id: item.room_type_id,\n        })\n\n        .then((res) => {\n          this.loadItems();\n        });\n    },\n\n    updateItem() {\n      this.$axios\n        .put(`/orders/${this.updateForm.id}`, {\n          id: this.updateForm.id,\n          name: this.updateForm.name,\n          phone_number: this.updateForm.phone_number,\n          email: this.updateForm.email,\n          time_start: this.updateForm.time_start,\n          time_end: this.updateForm.time_end,\n          room_id: this.updateForm.room_id,\n          status: this.updateForm.status,\n          room_type_id: this.updateForm.room_type_id,\n        })\n\n        .then((res) => {\n          this.editDialog = false;\n          this.loadItems();\n        })\n        .catch((err) => {\n          console.error(err);\n        });\n    },\n\n    async getRoomTypesList() {\n      await this.$axios\n        .get(\"/room_types/all\")\n        .then((res) => {\n          this.roomTypesList = res.data;\n        })\n        .catch((err) => {\n          console.error(err);\n        });\n    },\n\n    renderRoomType(id) {\n      const x = this.roomTypesList.find((i) => i.id === id);\n      return x.name;\n    },\n  },\n\n  async created() {\n    await this.getRoomTypesList();\n    this.loadItems();\n  },\n};\n</script>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}